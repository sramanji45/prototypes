services:
  app1:
    build:
      context: ..              # This makes 'flask_app' the root for the build
      dockerfile: build/Dockerfile
    ports:
      - "${PORT_1}:5000"
    environment:
      - INSTANCE_NAME=App_1

  app2:
    build:
      context: ..              # This makes 'flask_app' the root for the build
      dockerfile: build/Dockerfile
    ports:
      - "${PORT_2}:5000"
    environment:
      - INSTANCE_NAME=App_2

  app3:
    build:
      context: ..              # This makes 'flask_app' the root for the build
      dockerfile: build/Dockerfile
    ports:
      - "${PORT_3}:5000"
    environment:
      - INSTANCE_NAME=App_3